{% extends 'base.html' %}

{% block title %}로그인 - ChessOK{% endblock %}

{% block content %}
<h1>♟️ ChessOK 로그인</h1>

<div style="margin-top: 30px;">
    <h3 style="margin-bottom: 15px;">소셜 로그인</h3>

    <button class="btn btn-naver" onclick="loginWithNaver()">
        네이버로 로그인
    </button>

    <!-- 추후 추가 가능 -->
    <!-- <button class="btn btn-google">구글로 로그인</button> -->
    <!-- <button class="btn btn-kakao">카카오로 로그인</button> -->
</div>

<script>
function loginWithNaver() {
    const clientId = '{{ naver_client_id }}';  // Django에서 전달
    const redirectUri = encodeURIComponent('{{ naver_redirect_uri }}');
    const state = Math.random().toString(36).substring(7);

    // CSRF 방지용 state 저장
    localStorage.setItem('naver_state', state);

    const naverAuthUrl =
        `https://nid.naver.com/oauth2.0/authorize?` +
        `response_type=code&` +
        `client_id=${clientId}&` +
        `redirect_uri=${redirectUri}&` +
        `state=${state}`;

    window.location.href = naverAuthUrl;
}
</script>
{% endblock %}
