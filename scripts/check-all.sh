#!/bin/bash

# 모든 코드 품질 검사 실행 (CI/CD와 동일)

set -e

echo "╔════════════════════════════════════════╗"
echo "║  전체 코드 품질 검사 (CI/CD 시뮬레이션)        ║"
echo "╚════════════════════════════════════════╝"
echo ""

# 1. 린트 및 포맷 검사
echo "1️⃣  린트 및 포맷 검사..."
./scripts/lint.sh

echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

# 2. 테스트 및 커버리지
echo "2️⃣  테스트 및 커버리지 검사..."
./scripts/test.sh

echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

# 3. Django 보안 검사
echo "3️⃣  Django 보안 검사..."
uv run python manage.py check --deploy

echo ""
echo "╔════════════════════════════════════════╗"
echo "║      ✅ 모든 검사 통과!                    ║"
echo "╚════════════════════════════════════════╝"
echo ""
echo "커밋 및 푸시 가능합니다."
